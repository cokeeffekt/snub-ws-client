<!DOCTYPE html>
<html>

<head>
  <title>Sample</title>
  <script src="../dist/snub-ws-client.min.js"></script>
  <script>
    const snubWsClient = new SnubWsClient({
      workerType: 'SHARED_WORKER', // SHARED_WORKER, WEB_WORKER, MAIN_THREAD. Will always fall back to next available worker type if not supported.
      url: 'ws://localhost:1338',
    });
    snubWsClient.connect({auth:'123abc'});

    snubWsClient.onopen(async (auth) => {
      console.log('CLIENT AUTH => ', auth);

      snubWsClient.send('test_with_reply', 'test');

      let res = await snubWsClient.fetch('test_with_reply', 'test');
      console.log('CLIENT FETCH => ', res);


    });

    snubWsClient.onmessage((key, value) => {
      console.log('CLIENT MESSAGE => ', key, value);
    });

    snubWsClient.onclose((event) => {
      console.log('CLIENT CLOSE => ', event);
    });
  </script>
</head>

<body>
  open dev tools console.

  <br>
  <button id="close">Close</button>
</body>

</html>